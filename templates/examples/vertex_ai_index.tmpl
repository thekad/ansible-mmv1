- name: Create Index
  google.cloud.gcp_vertexai_index:
    state: present
    display_name: "{{`{{ resource_name }}`}}"
    region: us-central1
    metadata:
      contents_delta_uri: "gs://{{`{{ resource_name }}`}}/contents"
      config:
        dimensions: 2
        approximate_neighbors_count: 150
        shard_size: SHARD_SIZE_SMALL
        distance_measure_type: DOT_PRODUCT_DISTANCE
        algorithm_config:
          tree_ah_config:
            leaf_node_embedding_count: 500
            leaf_nodes_to_search_percent: 7
    project: "{{`{{ gcp_project }}`}}"
    auth_kind: "{{`{{ gcp_cred_kind }}`}}"
    service_account_file: "{{`{{ gcp_cred_file }}`}}"
