- name: Test case
  block:
    - name: Create Tensorboard
      google.cloud.gcp_vertexai_tensorboard:
        state: present
        display_name: "{{`{{ resource_name }}`}}"
        description: sample description
        region: us-central1
        project: "{{`{{ gcp_project }}`}}"
        auth_kind: "{{`{{ gcp_cred_kind }}`}}"
        service_account_file: "{{`{{ gcp_cred_file }}`}}"
      register: _mytb

    - name: Run assertions
      ansible.builtin.assert:
        that:
        - _mytb.changed == true

    - name: Update Tensorboard
      google.cloud.gcp_vertexai_tensorboard:
        state: present
        display_name: "{{`{{ resource_name }}`}}"
        description: "Updated description"
        region: us-central1
        project: "{{`{{ gcp_project }}`}}"
        auth_kind: "{{`{{ gcp_cred_kind }}`}}"
        service_account_file: "{{`{{ gcp_cred_file }}`}}"
      register: _mytb

    - name: Run assertions
      ansible.builtin.assert:
        that:
        - _mytb.changed == true
        - _mytb.description == "Updated description"

  always:
    - name: Delete Tensorboard
      google.cloud.gcp_vertexai_tensorboard:
        state: absent
        display_name: "{{`{{ resource_name }}`}}"
        region: us-central1
        project: "{{`{{ gcp_project }}`}}"
        auth_kind: "{{`{{ gcp_cred_kind }}`}}"
        service_account_file: "{{`{{ gcp_cred_file }}`}}"