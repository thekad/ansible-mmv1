- name: Create Endpoint
  google.cloud.gcp_vertexai_endpoint:
    name: "{{`{{ resource_name }}`}}"
    state: present
    display_name: "{{`{{ resource_name }}`}}"
    # network: "{{`projects/{{ gcp_project_number }}/global/networks/{{ mynet }}`}}"  # Network must be peered
    location: us-central1
    region: us-central1
    project: "{{`{{ gcp_project }}`}}"
    auth_kind: "{{`{{ gcp_cred_kind }}`}}"
    service_account_file: "{{`{{ gcp_cred_file }}`}}"
  register: _myep

- name: Print Endpoint
  ansible.builtin.debug:
    var: _myep

- name: Delete Endpoint
  google.cloud.gcp_vertexai_endpoint:
    name: "{{`{{ resource_name }}`}}"
    state: absent
    display_name: "{{`{{ resource_name }}`}}"
    # network: "{{`projects/{{ gcp_project_number }}/global/networks/{{ mynet }}`}}"
    location: us-central1
    region: us-central1
    project: "{{`{{ gcp_project }}`}}"
    auth_kind: "{{`{{ gcp_cred_kind }}`}}"
    service_account_file: "{{`{{ gcp_cred_file }}`}}"
